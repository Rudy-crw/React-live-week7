import{j as t,L as I,O as ct,r as S,u as ot,a as K,b as Pt,S as kt,c as qe,d as lt,e as Ve,f as Et,N as At,g as $t,h as Mt,R as Rt,i as Ot,P as Tt}from"./vendor-react-BKCutksY.js";import{M as dt}from"./vendor-bootstrap-Cl51P-U8.js";import{a as _}from"./vendor-axios-C0Zqfgkc.js";import{N as Ft,P as It}from"./vendor-swiper-BciwL7nL.js";import"./vendor-swal-BxDfb0uj.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();const Dt=()=>t.jsxs(t.Fragment,{children:[t.jsx("header",{children:t.jsxs("div",{className:"d-flex justify-content-between",children:[t.jsxs("ul",{className:"nav",children:[t.jsx("li",{className:"nav-item btn ",children:t.jsx(I,{className:"nav-link ",to:"/",children:"首頁"})}),t.jsx("li",{className:"nav-item btn",children:t.jsx(I,{className:"nav-link",to:"/products",children:"產品列表"})})]}),t.jsxs("ul",{className:"nav",children:[t.jsx("li",{className:"nav-item btn",children:t.jsx(I,{className:"nav-link",to:"/cart",children:"購物車"})}),t.jsx("li",{className:"nav-item btn",children:t.jsx(I,{className:"nav-link",to:"/checkout",children:"結帳"})}),t.jsx("li",{className:"nav-item btn",children:t.jsx(I,{className:"nav-link",to:"/login",children:"後台登入"})})]})]})}),t.jsx("main",{children:t.jsx(ct,{})}),t.jsx("footer",{children:t.jsx("p",{className:"mt-5 mb-3 text-muted",children:"© 2026~∞ Rudy-六角學院- React 直播班"})})]}),Ut=()=>t.jsxs("div",{className:"home-page",children:[t.jsx("div",{className:"hero-background",style:{position:"fixed",top:0,left:0,width:"100%",height:"100vh",zIndex:-1,overflow:"hidden"},children:t.jsx("img",{src:"https://github.com/Rudy-crw/React-live-week5/blob/main/src/public/HomeHero.png?raw=true",alt:"R-Garage Hero",style:{width:"100%",height:"100%",objectFit:"cover",filter:"brightness(0.6)"}})}),t.jsx("div",{className:"container d-flex flex-column justify-content-center align-items-center text-white",style:{minHeight:"100vh",paddingTop:"80px"},children:t.jsxs("div",{className:"text-center animate__animated animate__fadeInUp",children:[t.jsx("h1",{className:"display-1 fw-bold text-uppercase mb-3",style:{letterSpacing:"5px"},children:"R-Garage"}),t.jsx("p",{className:"fs-3 fw-light mb-4 text-white-50",children:"釋放你的騎士靈魂 | 頂級重機租賃"}),t.jsxs("div",{className:"d-flex justify-content-center gap-3",children:[t.jsx(I,{to:"/products",className:"btn btn-primary btn-lg px-5 py-3 rounded-pill fw-bold shadow",children:"立即預約"}),t.jsx("a",{href:"#intro",className:"btn btn-outline-light btn-lg px-5 py-3 rounded-pill",children:"了解更多"})]})]})}),t.jsxs("section",{id:"intro",className:"py-5 bg-light text-dark position-relative",style:{zIndex:1},children:[t.jsx("style",{children:`
            .feature-card {
              transition: all 0.3s ease;
              border: none;
            }
            .feature-card:hover {
              transform: translateY(-10px); /* 往上浮動 */
              box-shadow: 0 1rem 3rem rgba(0,0,0,.175)!important; /* 加深陰影 */
            }
            .icon-box {
              width: 80px;
              height: 80px;
              display: inline-flex;
              align-items: center;
              justify-content: center;
              transition: all 0.3s ease;
            }
            .feature-card:hover .icon-box {
              background-color: var(--bs-primary) !important;
              color: white !important;
            }
          `}),t.jsxs("div",{className:"container py-5",children:[t.jsxs("div",{className:"row text-center",children:[t.jsxs("div",{className:"col-12 mb-5",children:[t.jsx("h2",{className:"fw-bold display-6",children:"為什麼選擇 R-Garage？"}),t.jsx("div",{className:"bg-primary mx-auto mt-3 rounded",style:{width:"60px",height:"4px"}}),t.jsx("p",{className:"text-muted mt-3 fs-5",children:"我們不只租車，更提供一種生活態度"})]}),t.jsx("div",{className:"col-md-4 mb-4",children:t.jsx("div",{className:"card h-100 feature-card shadow-sm rounded-4 p-4 bg-white",children:t.jsxs("div",{className:"card-body",children:[t.jsx("div",{className:"icon-box mb-4 bg-primary bg-opacity-10 text-primary rounded-circle fs-2",children:t.jsx("i",{className:"bi bi-speedometer2"})}),t.jsx("h4",{className:"card-title fw-bold mb-3",children:"極致性能"}),t.jsx("p",{className:"card-text text-muted",children:"提供 Ducati V4 S、BMW S1000RR 等頂級仿賽，保證原廠輸出，拒絕閹割馬力，體驗最純粹的速度感。"})]})})}),t.jsx("div",{className:"col-md-4 mb-4",children:t.jsx("div",{className:"card h-100 feature-card shadow-sm rounded-4 p-4 bg-white",children:t.jsxs("div",{className:"card-body",children:[t.jsx("div",{className:"icon-box mb-4 bg-primary bg-opacity-10 text-primary rounded-circle fs-2",children:t.jsx("i",{className:"bi bi-shield-check"})}),t.jsx("h4",{className:"card-title fw-bold mb-3",children:"安全保障"}),t.jsx("p",{className:"card-text text-muted",children:"每台車輛皆定期由原廠技師檢修，並含強制險與道路救援服務，輪胎與煞車絕對是最佳狀態。"})]})})}),t.jsx("div",{className:"col-md-4 mb-4",children:t.jsx("div",{className:"card h-100 feature-card shadow-sm rounded-4 p-4 bg-white",children:t.jsxs("div",{className:"card-body",children:[t.jsx("div",{className:"icon-box mb-4 bg-primary bg-opacity-10 text-primary rounded-circle fs-2",children:t.jsx("i",{className:"bi bi-geo-alt-fill"})}),t.jsx("h4",{className:"card-title fw-bold mb-3",children:"取車便利"}),t.jsx("p",{className:"card-text text-muted",children:"位於市中心交通樞紐，提供進口安全帽、手套與藍芽耳機租借。只需帶上您的駕照，隨時出發。"})]})})})]}),t.jsx("div",{className:"text-center mt-5",children:t.jsxs(I,{to:"/products",className:"btn btn-outline-dark px-5 py-2 rounded-pill border-2 fw-bold",children:["查看全車系 (12款) ",t.jsx("i",{className:"bi bi-arrow-right ms-2"})]})})]})]})]}),B=e=>(Number(e)||0).toLocaleString(),zt="https://vue3-course-api.hexschool.io/v2",Lt="rudy2026",Bt=()=>{const[e,s]=S.useState([]),r=ot();S.useEffect(()=>{(async()=>{try{const i=await _.get(`${zt}/api/${Lt}/products/all`);s(i.data.products)}catch(i){console.log(i.response)}})()},[]);const n=a=>{r(`/product/${a}`)};return t.jsx(t.Fragment,{children:t.jsx("div",{className:"container",children:t.jsx("div",{className:"row justidy-content-center",children:e.map(a=>t.jsx("div",{className:"col-md-4  col-6 mb-3 ",children:t.jsxs("div",{className:"card ",children:[t.jsx("img",{src:a.imageUrl,className:"card-img-top",alt:a.title}),t.jsxs("div",{className:"card-body",children:[t.jsxs("h5",{className:"card-title",children:[a.category," ",a.title," ",t.jsx("span",{className:"badge rounded-pill text-bg-danger ms-2",children:a.style})]}),t.jsx("p",{className:"card-text",children:a.description}),t.jsxs("p",{className:"card-text",children:[t.jsxs("del",{children:["原價：",B(a.origin_price)]})," 售價：",B(a.price),t.jsxs("small",{className:"text-body-secondary",children:["/",a.unit]})]}),t.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>n(a.id),children:"查看更多"})]})]})},a.id))})})})};function E(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var qt=typeof Symbol=="function"&&Symbol.observable||"@@observable",We=qt,Ce=()=>Math.random().toString(36).substring(7).split("").join("."),Vt={INIT:`@@redux/INIT${Ce()}`,REPLACE:`@@redux/REPLACE${Ce()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Ce()}`},ue=Vt;function Ue(e){if(typeof e!="object"||e===null)return!1;let s=e;for(;Object.getPrototypeOf(s)!==null;)s=Object.getPrototypeOf(s);return Object.getPrototypeOf(e)===s||Object.getPrototypeOf(e)===null}function ut(e,s,r){if(typeof e!="function")throw new Error(E(2));if(typeof s=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(E(0));if(typeof s=="function"&&typeof r>"u"&&(r=s,s=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(E(1));return r(ut)(e,s)}let n=e,a=s,i=new Map,c=i,l=0,o=!1;function d(){c===i&&(c=new Map,i.forEach((h,p)=>{c.set(p,h)}))}function u(){if(o)throw new Error(E(3));return a}function f(h){if(typeof h!="function")throw new Error(E(4));if(o)throw new Error(E(5));let p=!0;d();const N=l++;return c.set(N,h),function(){if(p){if(o)throw new Error(E(6));p=!1,d(),c.delete(N),i=null}}}function g(h){if(!Ue(h))throw new Error(E(7));if(typeof h.type>"u")throw new Error(E(8));if(typeof h.type!="string")throw new Error(E(17));if(o)throw new Error(E(9));try{o=!0,a=n(a,h)}finally{o=!1}return(i=c).forEach(N=>{N()}),h}function j(h){if(typeof h!="function")throw new Error(E(10));n=h,g({type:ue.REPLACE})}function y(){const h=f;return{subscribe(p){if(typeof p!="object"||p===null)throw new Error(E(11));function N(){const b=p;b.next&&b.next(u())}return N(),{unsubscribe:h(N)}},[We](){return this}}}return g({type:ue.INIT}),{dispatch:g,subscribe:f,getState:u,replaceReducer:j,[We]:y}}function Wt(e){Object.keys(e).forEach(s=>{const r=e[s];if(typeof r(void 0,{type:ue.INIT})>"u")throw new Error(E(12));if(typeof r(void 0,{type:ue.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(E(13))})}function Ht(e){const s=Object.keys(e),r={};for(let i=0;i<s.length;i++){const c=s[i];typeof e[c]=="function"&&(r[c]=e[c])}const n=Object.keys(r);let a;try{Wt(r)}catch(i){a=i}return function(c={},l){if(a)throw a;let o=!1;const d={};for(let u=0;u<n.length;u++){const f=n[u],g=r[f],j=c[f],y=g(j,l);if(typeof y>"u")throw l&&l.type,new Error(E(14));d[f]=y,o=o||y!==j}return o=o||n.length!==Object.keys(c).length,o?d:c}}function he(...e){return e.length===0?s=>s:e.length===1?e[0]:e.reduce((s,r)=>(...n)=>s(r(...n)))}function Gt(...e){return s=>(r,n)=>{const a=s(r,n);let i=()=>{throw new Error(E(15))};const c={getState:a.getState,dispatch:(o,...d)=>i(o,...d)},l=e.map(o=>o(c));return i=he(...l)(a.dispatch),{...a,dispatch:i}}}function Kt(e){return Ue(e)&&"type"in e&&typeof e.type=="string"}var ht=Symbol.for("immer-nothing"),He=Symbol.for("immer-draftable"),A=Symbol.for("immer-state");function R(e,...s){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var $=Object,G=$.getPrototypeOf,me="constructor",be="prototype",$e="configurable",fe="enumerable",le="writable",J="value",U=e=>!!e&&!!e[A];function O(e){return e?mt(e)||Ne(e)||!!e[He]||!!e[me]?.[He]||we(e)||ve(e):!1}var Xt=$[be][me].toString(),Ge=new WeakMap;function mt(e){if(!e||!ze(e))return!1;const s=G(e);if(s===null||s===$[be])return!0;const r=$.hasOwnProperty.call(s,me)&&s[me];if(r===Object)return!0;if(!H(r))return!1;let n=Ge.get(r);return n===void 0&&(n=Function.toString.call(r),Ge.set(r,n)),n===Xt}function je(e,s,r=!0){se(e)===0?(r?Reflect.ownKeys(e):$.keys(e)).forEach(a=>{s(a,e[a],e)}):e.forEach((n,a)=>s(a,n,e))}function se(e){const s=e[A];return s?s.type_:Ne(e)?1:we(e)?2:ve(e)?3:0}var Ke=(e,s,r=se(e))=>r===2?e.has(s):$[be].hasOwnProperty.call(e,s),Me=(e,s,r=se(e))=>r===2?e.get(s):e[s],pe=(e,s,r,n=se(e))=>{n===2?e.set(s,r):n===3?e.add(r):e[s]=r};function Qt(e,s){return e===s?e!==0||1/e===1/s:e!==e&&s!==s}var Ne=Array.isArray,we=e=>e instanceof Map,ve=e=>e instanceof Set,ze=e=>typeof e=="object",H=e=>typeof e=="function",Pe=e=>typeof e=="boolean";function Yt(e){const s=+e;return Number.isInteger(s)&&String(s)===e}var F=e=>e.copy_||e.base_,Le=e=>e.modified_?e.copy_:e.base_;function Re(e,s){if(we(e))return new Map(e);if(ve(e))return new Set(e);if(Ne(e))return Array[be].slice.call(e);const r=mt(e);if(s===!0||s==="class_only"&&!r){const n=$.getOwnPropertyDescriptors(e);delete n[A];let a=Reflect.ownKeys(n);for(let i=0;i<a.length;i++){const c=a[i],l=n[c];l[le]===!1&&(l[le]=!0,l[$e]=!0),(l.get||l.set)&&(n[c]={[$e]:!0,[le]:!0,[fe]:l[fe],[J]:e[c]})}return $.create(G(e),n)}else{const n=G(e);if(n!==null&&r)return{...e};const a=$.create(n);return $.assign(a,e)}}function Be(e,s=!1){return _e(e)||U(e)||!O(e)||(se(e)>1&&$.defineProperties(e,{set:ne,add:ne,clear:ne,delete:ne}),$.freeze(e),s&&je(e,(r,n)=>{Be(n,!0)},!1)),e}function Jt(){R(2)}var ne={[J]:Jt};function _e(e){return e===null||!ze(e)?!0:$.isFrozen(e)}var xe="MapSet",Oe="Patches",Xe="ArrayMethods",ft={};function W(e){const s=ft[e];return s||R(0,e),s}var Qe=e=>!!ft[e],Z,pt=()=>Z,Zt=(e,s)=>({drafts_:[],parent_:e,immer_:s,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:Qe(xe)?W(xe):void 0,arrayMethodsPlugin_:Qe(Xe)?W(Xe):void 0});function Ye(e,s){s&&(e.patchPlugin_=W(Oe),e.patches_=[],e.inversePatches_=[],e.patchListener_=s)}function Te(e){Fe(e),e.drafts_.forEach(es),e.drafts_=null}function Fe(e){e===Z&&(Z=e.parent_)}var Je=e=>Z=Zt(Z,e);function es(e){const s=e[A];s.type_===0||s.type_===1?s.revoke_():s.revoked_=!0}function Ze(e,s){s.unfinalizedDrafts_=s.drafts_.length;const r=s.drafts_[0];if(e!==void 0&&e!==r){r[A].modified_&&(Te(s),R(4)),O(e)&&(e=et(s,e));const{patchPlugin_:a}=s;a&&a.generateReplacementPatches_(r[A].base_,e,s)}else e=et(s,r);return ts(s,e,!0),Te(s),s.patches_&&s.patchListener_(s.patches_,s.inversePatches_),e!==ht?e:void 0}function et(e,s){if(_e(s))return s;const r=s[A];if(!r)return ge(s,e.handledSet_,e);if(!Se(r,e))return s;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(e);yt(r,e)}return r.copy_}function ts(e,s,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Be(s,r)}function xt(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Se=(e,s)=>e.scope_===s,ss=[];function gt(e,s,r,n){const a=F(e),i=e.type_;if(n!==void 0&&Me(a,n,i)===s){pe(a,n,r,i);return}if(!e.draftLocations_){const l=e.draftLocations_=new Map;je(a,(o,d)=>{if(U(d)){const u=l.get(d)||[];u.push(o),l.set(d,u)}})}const c=e.draftLocations_.get(s)??ss;for(const l of c)pe(a,l,r,i)}function rs(e,s,r){e.callbacks_.push(function(a){const i=s;if(!i||!Se(i,a))return;a.mapSetPlugin_?.fixSetContents(i);const c=Le(i);gt(e,i.draft_??i,c,r),yt(i,a)})}function yt(e,s){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:n}=s;if(n){const a=n.getPath(e);a&&n.generatePatches_(e,a,s)}xt(e)}}function ns(e,s,r){const{scope_:n}=e;if(U(r)){const a=r[A];Se(a,n)&&a.callbacks_.push(function(){de(e);const c=Le(a);gt(e,r,c,s)})}else O(r)&&e.callbacks_.push(function(){const i=F(e);e.type_===3?i.has(r)&&ge(r,n.handledSet_,n):Me(i,s,e.type_)===r&&n.drafts_.length>1&&(e.assigned_.get(s)??!1)===!0&&e.copy_&&ge(Me(e.copy_,s,e.type_),n.handledSet_,n)})}function ge(e,s,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||U(e)||s.has(e)||!O(e)||_e(e)||(s.add(e),je(e,(n,a)=>{if(U(a)){const i=a[A];if(Se(i,r)){const c=Le(i);pe(e,n,c,e.type_),xt(i)}}else O(a)&&ge(a,s,r)})),e}function as(e,s){const r=Ne(e),n={type_:r?1:0,scope_:s?s.scope_:pt(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:s,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=n,i=ye;r&&(a=[n],i=ee);const{revoke:c,proxy:l}=Proxy.revocable(a,i);return n.draft_=l,n.revoke_=c,[l,n]}var ye={get(e,s){if(s===A)return e;let r=e.scope_.arrayMethodsPlugin_;const n=e.type_===1&&typeof s=="string";if(n&&r?.isArrayOperationMethod(s))return r.createMethodInterceptor(e,s);const a=F(e);if(!Ke(a,s,e.type_))return is(e,a,s);const i=a[s];if(e.finalized_||!O(i)||n&&e.operationMethod&&r?.isMutatingArrayMethod(e.operationMethod)&&Yt(s))return i;if(i===ke(e.base_,s)){de(e);const c=e.type_===1?+s:s,l=De(e.scope_,i,e,c);return e.copy_[c]=l}return i},has(e,s){return s in F(e)},ownKeys(e){return Reflect.ownKeys(F(e))},set(e,s,r){const n=bt(F(e),s);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=ke(F(e),s),i=a?.[A];if(i&&i.base_===r)return e.copy_[s]=r,e.assigned_.set(s,!1),!0;if(Qt(r,a)&&(r!==void 0||Ke(e.base_,s,e.type_)))return!0;de(e),Ie(e)}return e.copy_[s]===r&&(r!==void 0||s in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[s])||(e.copy_[s]=r,e.assigned_.set(s,!0),ns(e,s,r)),!0},deleteProperty(e,s){return de(e),ke(e.base_,s)!==void 0||s in e.base_?(e.assigned_.set(s,!1),Ie(e)):e.assigned_.delete(s),e.copy_&&delete e.copy_[s],!0},getOwnPropertyDescriptor(e,s){const r=F(e),n=Reflect.getOwnPropertyDescriptor(r,s);return n&&{[le]:!0,[$e]:e.type_!==1||s!=="length",[fe]:n[fe],[J]:r[s]}},defineProperty(){R(11)},getPrototypeOf(e){return G(e.base_)},setPrototypeOf(){R(12)}},ee={};for(let e in ye){let s=ye[e];ee[e]=function(){const r=arguments;return r[0]=r[0][0],s.apply(this,r)}}ee.deleteProperty=function(e,s){return ee.set.call(this,e,s,void 0)};ee.set=function(e,s,r){return ye.set.call(this,e[0],s,r,e[0])};function ke(e,s){const r=e[A];return(r?F(r):e)[s]}function is(e,s,r){const n=bt(s,r);return n?J in n?n[J]:n.get?.call(e.draft_):void 0}function bt(e,s){if(!(s in e))return;let r=G(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,s);if(n)return n;r=G(r)}}function Ie(e){e.modified_||(e.modified_=!0,e.parent_&&Ie(e.parent_))}function de(e){e.copy_||(e.assigned_=new Map,e.copy_=Re(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var cs=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(s,r,n)=>{if(H(s)&&!H(r)){const i=r;r=s;const c=this;return function(o=i,...d){return c.produce(o,u=>r.call(this,u,...d))}}H(r)||R(6),n!==void 0&&!H(n)&&R(7);let a;if(O(s)){const i=Je(this),c=De(i,s,void 0);let l=!0;try{a=r(c),l=!1}finally{l?Te(i):Fe(i)}return Ye(i,n),Ze(a,i)}else if(!s||!ze(s)){if(a=r(s),a===void 0&&(a=s),a===ht&&(a=void 0),this.autoFreeze_&&Be(a,!0),n){const i=[],c=[];W(Oe).generateReplacementPatches_(s,a,{patches_:i,inversePatches_:c}),n(i,c)}return a}else R(1,s)},this.produceWithPatches=(s,r)=>{if(H(s))return(c,...l)=>this.produceWithPatches(c,o=>s(o,...l));let n,a;return[this.produce(s,r,(c,l)=>{n=c,a=l}),n,a]},Pe(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),Pe(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),Pe(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){O(e)||R(8),U(e)&&(e=os(e));const s=Je(this),r=De(s,e,void 0);return r[A].isManual_=!0,Fe(s),r}finishDraft(e,s){const r=e&&e[A];(!r||!r.isManual_)&&R(9);const{scope_:n}=r;return Ye(n,s),Ze(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,s){let r;for(r=s.length-1;r>=0;r--){const a=s[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(s=s.slice(r+1));const n=W(Oe).applyPatches_;return U(e)?n(e,s):this.produce(e,a=>n(a,s))}};function De(e,s,r,n){const[a,i]=we(s)?W(xe).proxyMap_(s,r):ve(s)?W(xe).proxySet_(s,r):as(s,r);return(r?.scope_??pt()).drafts_.push(a),i.callbacks_=r?.callbacks_??[],i.key_=n,r&&n!==void 0?rs(r,i,n):i.callbacks_.push(function(o){o.mapSetPlugin_?.fixSetContents(i);const{patchPlugin_:d}=o;i.modified_&&d&&d.generatePatches_(i,[],o)}),a}function os(e){return U(e)||R(10,e),jt(e)}function jt(e){if(!O(e)||_e(e))return e;const s=e[A];let r,n=!0;if(s){if(!s.modified_)return s.base_;s.finalized_=!0,r=Re(e,s.scope_.immer_.useStrictShallowCopy_),n=s.scope_.immer_.shouldUseStrictIteration()}else r=Re(e,!0);return je(r,(a,i)=>{pe(r,a,jt(i))},n),s&&(s.finalized_=!1),r}var ls=new cs,Nt=ls.produce;function wt(e){return({dispatch:r,getState:n})=>a=>i=>typeof i=="function"?i(r,n,e):a(i)}var ds=wt(),us=wt,hs=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?he:he.apply(null,arguments)},ms=e=>e&&typeof e.match=="function";function Y(e,s){function r(...n){if(s){let a=s(...n);if(!a)throw new Error(D(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>Kt(n)&&n.type===e,r}var vt=class Q extends Array{constructor(...s){super(...s),Object.setPrototypeOf(this,Q.prototype)}static get[Symbol.species](){return Q}concat(...s){return super.concat.apply(this,s)}prepend(...s){return s.length===1&&Array.isArray(s[0])?new Q(...s[0].concat(this)):new Q(...s.concat(this))}};function tt(e){return O(e)?Nt(e,()=>{}):e}function ae(e,s,r){return e.has(s)?e.get(s):e.set(s,r(s)).get(s)}function fs(e){return typeof e=="boolean"}var ps=()=>function(s){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:i=!0}=s??{};let c=new vt;return r&&(fs(r)?c.push(ds):c.push(us(r.extraArgument))),c},xs="RTK_autoBatch",st=e=>s=>{setTimeout(s,e)},gs=(e={type:"raf"})=>s=>(...r)=>{const n=s(...r);let a=!0,i=!1,c=!1;const l=new Set,o=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:st(10):e.type==="callback"?e.queueNotification:st(e.timeout),d=()=>{c=!1,i&&(i=!1,l.forEach(u=>u()))};return Object.assign({},n,{subscribe(u){const f=()=>a&&u(),g=n.subscribe(f);return l.add(u),()=>{g(),l.delete(u)}},dispatch(u){try{return a=!u?.meta?.[xs],i=!a,i&&(c||(c=!0,o(d))),n.dispatch(u)}finally{a=!0}}})},ys=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new vt(e);return n&&a.push(gs(typeof n=="object"?n:void 0)),a};function bs(e){const s=ps(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:i=void 0,enhancers:c=void 0}=e||{};let l;if(typeof r=="function")l=r;else if(Ue(r))l=Ht(r);else throw new Error(D(1));let o;typeof n=="function"?o=n(s):o=s();let d=he;a&&(d=hs({trace:!1,...typeof a=="object"&&a}));const u=Gt(...o),f=ys(u);let g=typeof c=="function"?c(f):f();const j=d(...g);return ut(l,i,j)}function _t(e){const s={},r=[];let n;const a={addCase(i,c){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(D(28));if(l in s)throw new Error(D(29));return s[l]=c,a},addAsyncThunk(i,c){return c.pending&&(s[i.pending.type]=c.pending),c.rejected&&(s[i.rejected.type]=c.rejected),c.fulfilled&&(s[i.fulfilled.type]=c.fulfilled),c.settled&&r.push({matcher:i.settled,reducer:c.settled}),a},addMatcher(i,c){return r.push({matcher:i,reducer:c}),a},addDefaultCase(i){return n=i,a}};return e(a),[s,r,n]}function js(e){return typeof e=="function"}function Ns(e,s){let[r,n,a]=_t(s),i;if(js(e))i=()=>tt(e());else{const l=tt(e);i=()=>l}function c(l=i(),o){let d=[r[o.type],...n.filter(({matcher:u})=>u(o)).map(({reducer:u})=>u)];return d.filter(u=>!!u).length===0&&(d=[a]),d.reduce((u,f)=>{if(f)if(U(u)){const j=f(u,o);return j===void 0?u:j}else{if(O(u))return Nt(u,g=>f(g,o));{const g=f(u,o);if(g===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return u},l)}return c.getInitialState=i,c}var ws=(e,s)=>ms(e)?e.match(s):e(s);function vs(...e){return s=>e.some(r=>ws(r,s))}var _s="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Ss=(e=21)=>{let s="",r=e;for(;r--;)s+=_s[Math.random()*64|0];return s},Cs=["name","message","stack","code"],Ee=class{constructor(e,s){this.payload=e,this.meta=s}_type},rt=class{constructor(e,s){this.payload=e,this.meta=s}_type},Ps=e=>{if(typeof e=="object"&&e!==null){const s={};for(const r of Cs)typeof e[r]=="string"&&(s[r]=e[r]);return s}return{message:String(e)}},nt="External signal was aborted",ks=(()=>{function e(s,r,n){const a=Y(s+"/fulfilled",(o,d,u,f)=>({payload:o,meta:{...f||{},arg:u,requestId:d,requestStatus:"fulfilled"}})),i=Y(s+"/pending",(o,d,u)=>({payload:void 0,meta:{...u||{},arg:d,requestId:o,requestStatus:"pending"}})),c=Y(s+"/rejected",(o,d,u,f,g)=>({payload:f,error:(n&&n.serializeError||Ps)(o||"Rejected"),meta:{...g||{},arg:u,requestId:d,rejectedWithValue:!!f,requestStatus:"rejected",aborted:o?.name==="AbortError",condition:o?.name==="ConditionError"}}));function l(o,{signal:d}={}){return(u,f,g)=>{const j=n?.idGenerator?n.idGenerator(o):Ss(),y=new AbortController;let v,h;function p(m){h=m,y.abort()}d&&(d.aborted?p(nt):d.addEventListener("abort",()=>p(nt),{once:!0}));const N=(async function(){let m;try{let w=n?.condition?.(o,{getState:f,extra:g});if(As(w)&&(w=await w),w===!1||y.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const M=new Promise((C,k)=>{v=()=>{k({name:"AbortError",message:h||"Aborted"})},y.signal.addEventListener("abort",v,{once:!0})});u(i(j,o,n?.getPendingMeta?.({requestId:j,arg:o},{getState:f,extra:g}))),m=await Promise.race([M,Promise.resolve(r(o,{dispatch:u,getState:f,extra:g,requestId:j,signal:y.signal,abort:p,rejectWithValue:(C,k)=>new Ee(C,k),fulfillWithValue:(C,k)=>new rt(C,k)})).then(C=>{if(C instanceof Ee)throw C;return C instanceof rt?a(C.payload,j,o,C.meta):a(C,j,o)})])}catch(w){m=w instanceof Ee?c(null,j,o,w.payload,w.meta):c(w,j,o)}finally{v&&y.signal.removeEventListener("abort",v)}return n&&!n.dispatchConditionRejection&&c.match(m)&&m.meta.condition||u(m),m})();return Object.assign(N,{abort:p,requestId:j,arg:o,unwrap(){return N.then(Es)}})}}return Object.assign(l,{pending:i,rejected:c,fulfilled:a,settled:vs(c,a),typePrefix:s})}return e.withTypes=()=>e,e})();function Es(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function As(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var $s=Symbol.for("rtk-slice-createasyncthunk");function Ms(e,s){return`${e}/${s}`}function Rs({creators:e}={}){const s=e?.asyncThunk?.[$s];return function(n){const{name:a,reducerPath:i=a}=n;if(!a)throw new Error(D(11));const c=(typeof n.reducers=="function"?n.reducers(Fs()):n.reducers)||{},l=Object.keys(c),o={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(m,b){const w=typeof m=="string"?m:m.type;if(!w)throw new Error(D(12));if(w in o.sliceCaseReducersByType)throw new Error(D(13));return o.sliceCaseReducersByType[w]=b,d},addMatcher(m,b){return o.sliceMatchers.push({matcher:m,reducer:b}),d},exposeAction(m,b){return o.actionCreators[m]=b,d},exposeCaseReducer(m,b){return o.sliceCaseReducersByName[m]=b,d}};l.forEach(m=>{const b=c[m],w={reducerName:m,type:Ms(a,m),createNotation:typeof n.reducers=="function"};Ds(b)?zs(w,b,d,s):Is(w,b,d)});function u(){const[m={},b=[],w=void 0]=typeof n.extraReducers=="function"?_t(n.extraReducers):[n.extraReducers],M={...m,...o.sliceCaseReducersByType};return Ns(n.initialState,C=>{for(let k in M)C.addCase(k,M[k]);for(let k of o.sliceMatchers)C.addMatcher(k.matcher,k.reducer);for(let k of b)C.addMatcher(k.matcher,k.reducer);w&&C.addDefaultCase(w)})}const f=m=>m,g=new Map,j=new WeakMap;let y;function v(m,b){return y||(y=u()),y(m,b)}function h(){return y||(y=u()),y.getInitialState()}function p(m,b=!1){function w(C){let k=C[m];return typeof k>"u"&&b&&(k=ae(j,w,h)),k}function M(C=f){const k=ae(g,b,()=>new WeakMap);return ae(k,C,()=>{const x={};for(const[P,T]of Object.entries(n.selectors??{}))x[P]=Os(T,C,()=>ae(j,C,h),b);return x})}return{reducerPath:m,getSelectors:M,get selectors(){return M(w)},selectSlice:w}}const N={name:a,reducer:v,actions:o.actionCreators,caseReducers:o.sliceCaseReducersByName,getInitialState:h,...p(i),injectInto(m,{reducerPath:b,...w}={}){const M=b??i;return m.inject({reducerPath:M,reducer:v},w),{...N,...p(M,!0)}}};return N}}function Os(e,s,r,n){function a(i,...c){let l=s(i);return typeof l>"u"&&n&&(l=r()),e(l,...c)}return a.unwrapped=e,a}var Ts=Rs();function Fs(){function e(s,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:s,...r}}return e.withTypes=()=>e,{reducer(s){return Object.assign({[s.name](...r){return s(...r)}}[s.name],{_reducerDefinitionType:"reducer"})},preparedReducer(s,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:s,reducer:r}},asyncThunk:e}}function Is({type:e,reducerName:s,createNotation:r},n,a){let i,c;if("reducer"in n){if(r&&!Us(n))throw new Error(D(17));i=n.reducer,c=n.prepare}else i=n;a.addCase(e,i).exposeCaseReducer(s,i).exposeAction(s,c?Y(e,c):Y(e))}function Ds(e){return e._reducerDefinitionType==="asyncThunk"}function Us(e){return e._reducerDefinitionType==="reducerWithPrepare"}function zs({type:e,reducerName:s},r,n,a){if(!a)throw new Error(D(18));const{payloadCreator:i,fulfilled:c,pending:l,rejected:o,settled:d,options:u}=r,f=a(e,i,u);n.exposeAction(s,f),c&&n.addCase(f.fulfilled,c),l&&n.addCase(f.pending,l),o&&n.addCase(f.rejected,o),d&&n.addMatcher(f.settled,d),n.exposeCaseReducer(s,{fulfilled:c||ie,pending:l||ie,rejected:o||ie,settled:d||ie})}function ie(){}function D(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const St=Ts({name:"message",initialState:[],reducers:{createMessage(e,s){e.push({id:s.payload.id,type:s.payload.success?"success":"danger",title:s.payload.success?"成功":"失敗",text:s.payload.message})},removeMessage(e,s){const r=e.findIndex(n=>n.id===s.payload);r!==-1&&e.splice(r,1)}}}),te=ks("message/createAsyncMessage",async(e,{dispatch:s,requestId:r})=>{s(Ls({...e,id:r})),setTimeout(()=>{s(Bs(r))},2e3)}),{createMessage:Ls,removeMessage:Bs}=St.actions,qs=St.reducer,X=()=>{const e=K();return{showError:n=>{e(te({success:!1,message:n}))},showSuccess:n=>{e(te({success:!0,message:n}))}}},at="https://vue3-course-api.hexschool.io/v2",it="rudy2026",Vs=()=>{const{showError:e,showSuccess:s}=X(),{id:r}=Pt(),[n,a]=S.useState();S.useEffect(()=>{(async l=>{try{const o=await _.get(`${at}/api/${it}/product/${l}`);a(o.data.product)}catch(o){console.log(o.response)}})(r)},[r]);const i=async(c,l)=>{try{const o={product_id:c,qty:1},d=await _.post(`${at}/api/${it}/cart`,{data:o});s("商品已加入購物車")}catch(o){e(o.response.message)}};return n?t.jsx(t.Fragment,{children:t.jsxs("div",{className:"container mt-3",children:[t.jsx("nav",{"aria-label":"breadcrumb",children:t.jsxs("ol",{className:"breadcrumb",children:[t.jsx("li",{className:"breadcrumb-item",children:"首頁"}),t.jsx("li",{className:"breadcrumb-item",children:"產品列表"}),t.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:n.title}),t.jsxs("li",{className:"breadcrumb-item active","aria-current":"page",children:[n.category," ",n.title]})]})}),t.jsxs("div",{className:"row",children:[t.jsx("div",{className:"col-md-7",children:t.jsxs(kt,{modules:[Ft,It],navigation:!0,pagination:{clickable:!0},spaceBetween:10,slidesPerView:1,loop:!0,className:"rounded-3 shadow-sm",style:{height:"500px",backgroundColor:"#f8f9fa"},children:[t.jsx(qe,{children:t.jsx("img",{src:n.imageUrl,className:"w-100 h-100 object-fit-contain",alt:`${n.category} ${n.title}`})}),n.imagesUrl?.map((c,l)=>t.jsx(qe,{children:t.jsx("img",{src:c,className:"w-100 h-100 object-fit-contain",alt:`附圖-${l}`})},l))]})}),t.jsxs("div",{className:"col-md-5 mt-4 mt-md-0",children:[" ",t.jsxs("div",{className:"d-flex flex-column h-100 justify-content-center",children:[t.jsx("div",{className:"mb-3",children:t.jsx("span",{className:"badge bg-dark",children:n.style})}),t.jsxs("h1",{className:"fw-bold mb-3",children:[n.category," ",n.title]}),t.jsx("p",{className:"fs-5 text-muted mb-4",children:n.description}),t.jsx("div",{className:"mb-3 p-3 bg-light rounded",children:t.jsx("p",{className:"mb-0 text-secondary",children:n.content})}),t.jsx("div",{className:" mb-4",children:t.jsxs("p",{className:"card-text fs-5",children:[t.jsxs("del",{className:"text-muted me-2",children:["原價：",B(n.origin_price)]}),"售價：",t.jsx("span",{className:"fw-bold text-danger display-6",children:B(n.price)}),t.jsxs("small",{className:"text-body-secondary ms-1",children:["/",n.unit]})]})}),t.jsx("div",{className:"d-grid gap-2",children:t.jsxs("button",{type:"button",className:"btn btn-primary btn-lg py-3 fw-bold shadow-sm",onClick:()=>i(n.id),children:[t.jsx("i",{className:"bi bi-cart-plus-fill me-2"})," 加入購物車"]})})]})]})]})]})}):t.jsx("h2",{children:"查無產品"})},q="https://vue3-course-api.hexschool.io/v2",V="rudy2026",Ws=()=>{const{showError:e,showSuccess:s}=X(),r=K(),[n,a]=S.useState({});S.useEffect(()=>{(async()=>{try{const d=await _.get(`${q}/api/${V}/cart`);a(d.data.data),console.log("res.data.data:",d.data)}catch(d){console.log(d.response)}})()},[]);const i=async(o,d,u=1)=>{try{const f={product_id:d,qty:u},g=await _.put(`${q}/api/${V}/cart/${o}`,{data:f});console.log(g);const j=await _.get(`${q}/api/${V}/cart`);a(j.data.data),s("數量更新成功！")}catch(f){r(te(f.response.data))}},c=async o=>{try{const d=await _.delete(`${q}/api/${V}/cart/${o}`);console.log(d);const u=await _.get(`${q}/api/${V}/cart`);a(u.data.data),s("商品刪除成功！")}catch(d){e(d.response.data)}},l=async()=>{try{const o=await _.delete(`${q}/api/${V}/carts`);console.log(o);const d=await _.get(`${q}/api/${V}/cart`);a(d.data.data),s("刪品已全部刪除成功！")}catch(o){console.log(o.response)}};return t.jsxs("div",{className:"container",children:[t.jsx("h2",{children:"購物車列表"}),t.jsx("div",{className:"text-end mt-4",children:t.jsx("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>{l()},disabled:!n.carts?.length,children:"清空購物車"})}),t.jsxs("table",{className:"table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{scope:"col"}),t.jsx("th",{scope:"col"}),t.jsx("th",{scope:"col",children:"品名"}),t.jsx("th",{scope:"col",children:"數量/單位"}),t.jsx("th",{className:"text-end",scope:"col",children:"小計"})]})}),t.jsx("tbody",{children:n?.carts?.map(o=>t.jsxs("tr",{children:[t.jsx("td",{children:t.jsx("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:()=>{c(o.id)},children:"刪除"})}),t.jsx("td",{children:t.jsx("img",{src:o.product.imageUrl,alt:o.product.title,style:{width:100}})}),t.jsxs("th",{scope:"row",children:[o.product.category," ",o.product.title]}),t.jsxs("td",{children:[o.product.qty,t.jsxs("div",{className:"input-group input-group-sm mb-3",children:[t.jsx("input",{type:"number",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-sm",defaultValue:o.qty,onChange:d=>{i(o.id,o.product_id,Number(d.target.value))}}),t.jsx("span",{className:"input-group-text",id:"inputGroup-sizing-sm",children:o.product.unit})]})]}),t.jsx("td",{className:"text-end",children:B(o.final_total)})]},o.id))}),t.jsx("tfoot",{children:t.jsxs("tr",{children:[t.jsx("td",{className:"text-end",colSpan:"4",children:"總計"}),t.jsx("td",{className:"text-end",children:B(n.final_total)})]})})]})]})},Hs=()=>t.jsx(t.Fragment,{children:t.jsx("h1",{children:"錯誤頁面，畫面即將轉至首頁。"})}),Gs=({product:e,addCart:s,closeModal:r})=>{const[n,a]=S.useState(1),i=()=>{s(e.id,n),r()};return t.jsx(t.Fragment,{children:t.jsx("div",{className:"modal",id:"productModal",children:t.jsx("div",{className:"modal-dialog",children:t.jsxs("div",{className:"modal-content",children:[t.jsxs("div",{className:"modal-header",children:[t.jsxs("h5",{className:"modal-title",children:[e.category," ",e.title]}),t.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),t.jsxs("div",{className:"modal-body",children:[t.jsx("img",{className:"w-100",src:e.imageUrl}),t.jsx("p",{className:"mt-3",children:e.description}),t.jsx("p",{children:e.content}),t.jsxs("p",{children:["價錢：",t.jsxs("del",{children:["$",e.origin_price]}),"，特價：$",e.price]}),t.jsxs("div",{className:"d-flex align-items-center",children:[t.jsx("label",{style:{width:"150px"},children:"購買數量："}),t.jsx("button",{className:"btn btn-danger",type:"button",id:"button-addon1","aria-label":"Decrease quantity",onClick:()=>a(c=>c===1?1:c-1),children:t.jsx("i",{className:"fa-solid fa-minus"})}),t.jsx("input",{className:"form-control",type:"number",min:"1",max:"10",value:n,onChange:c=>a(Number(c.target.value))}),t.jsx("button",{className:"btn btn-primary",type:"button",id:"button-addon2","aria-label":"Decrease quantity",onClick:()=>a(c=>c+1),children:t.jsx("i",{className:"fa-solid fa-plus"})})]})]}),t.jsx("div",{className:"modal-footer",children:t.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>{i()},children:"加入購物車"})})]})})})})},Ct={required:"請輸入 Email",pattern:{value:/^\S+@\S+$/i,message:"Email 格式不正確"}},z="https://vue3-course-api.hexschool.io/v2",L="rudy2026",Ks=()=>{const[e,s]=S.useState([]),[r,n]=S.useState({}),[a,i]=S.useState({}),[c,l]=S.useState(null),[o,d]=S.useState(null),u=S.useRef(null);K();const{showError:f,showSuccess:g}=X(),{register:j,handleSubmit:y,formState:{errors:v},reset:h}=lt({mode:"onChange"}),p=async()=>{try{const x=await _.get(`${z}/api/${L}/cart`);n(x.data.data)}catch(x){console.log(x.response.data.message)}};S.useEffect(()=>{(async()=>{try{const P=await _.get(`${z}/api/${L}/products/all`);s(P.data.products),console.log(P.data.products)}catch(P){console.log(P.response.data.message)}})(),p(),u.current=new dt("#productModal",{keyboard:!1}),document.querySelector("#productModal").addEventListener("hide.bs.modal",()=>{document.activeElement instanceof HTMLElement&&document.activeElement.blur()})},[]);const N=async(x,P,T=1)=>{try{const re={product_id:P,qty:T},dr=await _.put(`${z}/api/${L}/cart/${x}`,{data:re});g("數量已更新！"),p()}catch(re){f(re.response.data.message)}},m=async(x,P)=>{l(x);try{const T={product_id:x,qty:P},re=await _.post(`${z}/api/${L}/cart`,{data:T});g("商品已加入購物車"),p()}catch(T){f(T.response.data.message)}finally{l(null)}},b=async x=>{try{const P=await _.delete(`${z}/api/${L}/cart/${x}`);g("商品刪除成功！"),p()}catch(P){f(P.response.data.message)}},w=async()=>{try{const x=await _.delete(`${z}/api/${L}/cart1`);p(),g("已清空購物車！")}catch(x){f(x.response.data.message)}},M=async x=>{try{const P={user:x,message:x.message},T=await _.post(`${z}/api/${L}/order`,{data:P});h(),p(),g(`訂單建立成功，您的訂單標號為： ${T.data.orderId}`)}catch(P){f(P.response.data.message)}},C=async x=>{d(x);try{const P=await _.get(`${z}/api/${L}/product/${x}`);i(P.data.product)}catch(P){console.log(P.response.data.message)}finally{d(null)}u.current.show()},k=()=>{u.current.hide()};return t.jsxs("div",{className:"container",children:[t.jsxs("table",{className:"table align-middle",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"圖片"}),t.jsx("th",{children:"商品名稱"}),t.jsx("th",{children:"價格"}),t.jsx("th",{})]})}),t.jsx("tbody",{children:e.map(x=>t.jsxs("tr",{children:[t.jsx("td",{style:{width:"200px"},children:t.jsx("div",{style:{height:"100px",backgroundSize:"cover",backgroundPosition:"center",backgroundImage:`url(${x.imageUrl})`}})}),t.jsxs("td",{children:[x.category," ",x.title]}),t.jsxs("td",{children:[t.jsxs("del",{className:"h6",children:["原價：",x.origin_price]}),t.jsxs("div",{className:"h5",children:["特價：",x.price]})]}),t.jsx("td",{children:t.jsxs("div",{className:"btn-group btn-group-sm",children:[t.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>{C(x.id)},disabled:o===x.id,children:o===x.id?t.jsx(Ve,{color:"grey",width:80,height:16}):"查看更多"}),t.jsx("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>{m(x.id,1)},disabled:c===x.id,children:c===x.id?t.jsx(Ve,{color:"grey",width:80,height:16}):"加到購物車"})]})})]},x.id))})]}),t.jsx("h2",{children:"購物車列表"}),t.jsx("div",{className:"text-end mt-4",children:t.jsx("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>{w()},disabled:!r.carts?.length,children:"清空購物車"})}),t.jsxs("table",{className:"table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{scope:"col"}),t.jsx("th",{scope:"col"}),t.jsx("th",{scope:"col",children:"品名"}),t.jsx("th",{scope:"col",children:"數量/單位"}),t.jsx("th",{className:"text-end",scope:"col",children:"小計"})]})}),t.jsx("tbody",{children:r?.carts?.map(x=>t.jsxs("tr",{children:[t.jsx("td",{children:t.jsx("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:()=>{b(x.id)},children:"刪除"})}),t.jsx("td",{children:t.jsx("img",{src:x.product.imageUrl,alt:x.product.title,style:{width:100}})}),t.jsxs("th",{scope:"row",children:[x.product.category," ",x.product.title]}),t.jsxs("td",{children:[x.product.qty,t.jsxs("div",{className:"input-group input-group-sm mb-3",children:[t.jsx("input",{type:"number",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-sm",defaultValue:x.qty,onChange:P=>{N(x.id,x.product_id,Number(P.target.value))}}),t.jsx("span",{className:"input-group-text",id:"inputGroup-sizing-sm",children:x.product.unit})]})]}),t.jsx("td",{className:"text-end",children:B(x.final_total)})]},x.id))}),t.jsx("tfoot",{children:t.jsxs("tr",{children:[t.jsx("td",{className:"text-end",colSpan:"4",children:"總計"}),t.jsx("td",{className:"text-end",children:B(r.final_total)})]})})]}),t.jsx("div",{className:"my-5 row justify-content-center",children:t.jsxs("form",{className:"col-md-6",onSubmit:y(M),children:[t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{htmlFor:"email",className:"form-label",children:"Email"}),t.jsx("input",{id:"email",name:"email",type:"email",className:"form-control",placeholder:"請輸入 Email",...j("email",Ct)}),v.email&&t.jsx("p",{className:"text-danger",children:v.email.message})]}),t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{htmlFor:"name",className:"form-label",children:"收件人姓名"}),t.jsx("input",{id:"name",name:"name",type:"text",className:"form-control",placeholder:"請輸入姓名",...j("name",{required:"請輸入姓名",minLength:{value:2,message:"姓名最少 2 個字"}})}),v.name&&t.jsx("p",{className:"text-danger",children:v.name.message})]}),t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{htmlFor:"tel",className:"form-label",children:"收件人電話"}),t.jsx("input",{id:"tel",name:"tel",type:"tel",className:"form-control",placeholder:"請輸入電話",...j("tel",{required:"請輸入電話",pattern:{value:/^\d+$/,message:"電話格式不正確"},minLength:{value:8,message:"電話至少 8 碼"}})}),v.tel&&t.jsx("p",{className:"text-danger",children:v.tel.message})]}),t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{htmlFor:"address",className:"form-label",children:"收件人地址"}),t.jsx("input",{id:"address",name:"address",type:"text",className:"form-control",placeholder:"請輸入地址",...j("address",{required:"請輸入地址"})}),v.address&&t.jsx("p",{className:"text-danger",children:v.address.message})]}),t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{htmlFor:"message",className:"form-label",children:"留言"}),t.jsx("textarea",{id:"message",className:"form-control",cols:"30",rows:"10",...j("message")})]}),t.jsx("div",{className:"text-end",children:t.jsx("button",{type:"submit",className:"btn btn-danger",children:"送出訂單"})})]})}),t.jsx(Gs,{product:a,addCart:m,closeModal:k})]})},Xs="https://vue3-course-api.hexschool.io/v2";function Qs(){const e=ot();K();const{showError:s,showSuccess:r}=X(),{register:n,handleSubmit:a,formState:{errors:i,isValid:c}}=lt({mode:"onChange",defaultValues:{username:"s60990340@gmail.com",password:""}}),l=async o=>{try{const d=await _.post(`${Xs}/admin/signin`,o);console.log(d.data);const{token:u,expired:f}=d.data;document.cookie=`hexToken=${u}; expires=${new Date(f)}`,_.defaults.headers.common.Authorization=u,r("登入成功"),e("/admin/products")}catch(d){console.log(d.response),s("登入失敗，請檢查帳號密碼！")}};return t.jsx("div",{className:"container login",children:t.jsxs("div",{className:"row justify-content-center",children:[t.jsx("h1",{className:"h3 mb-3 font-weight-normal",children:"請先登入"}),t.jsx("div",{className:"col-8",children:t.jsxs("form",{id:"form",className:"form-signin",onSubmit:a(l),children:[t.jsxs("div",{className:"form-floating mb-3",children:[t.jsx("input",{type:"email",className:"form-control",name:"username",placeholder:"name@product.com",required:!0,autoFocus:!0,...n("username",Ct)}),t.jsx("label",{htmlFor:"username",children:"Email address"}),i.username&&t.jsx("p",{className:"text-danger",children:i.username.message})]}),t.jsxs("div",{className:"form-floating",children:[t.jsx("input",{type:"password",className:"form-control",name:"password",placeholder:"Password",required:!0,...n("password",{required:"請輸入密碼",minLength:{value:6,message:"密碼最少 6 碼"}})}),t.jsx("label",{htmlFor:"password",children:"Password"}),i.password&&t.jsx("p",{className:"text-danger",children:i.password.message})]}),t.jsx("button",{className:"btn btn-lg btn-primary w-100 mt-3",type:"submit",disabled:!c,children:"登入"})]})})]})})}const ce="https://vue3-course-api.hexschool.io/v2",oe="rudy2026";function Ys({modalType:e,templateProduct:s,closeModal:r,getProducts:n}){const[a,i]=S.useState(s),c=K(),{showError:l,showSuccess:o}=X();S.useEffect(()=>{i(s)},[s]);const d=h=>{const{name:p,value:N,checked:m,type:b}=h.target;i(w=>({...w,[p]:b==="checkbox"?m:N}))},u=(h,p)=>{i(N=>{const m=[...N.imagesUrl];return m[h]=p,p!==""&&h===m.length-1&&m.length<5&&m.push(""),p===""&&m.length>1&&m[m.length-1]===""&&m.pop(),{...N,imagesUrl:m}})},f=()=>{i(h=>{const p=[...h.imagesUrl];return p.push(""),{...h,imagesUrl:p}})},g=()=>{i(h=>{const p=[...h.imagesUrl];return p.pop(),{...h,imagesUrl:p}})},j=async h=>{let p=`${ce}/api/${oe}/admin/product`,N="post";e==="edit"&&(p=`${ce}/api/${oe}/admin/product/${h}`,N="put");const m={data:{...a,origin_price:Number(a.origin_price),price:Number(a.price),is_enabled:a.is_enabled?1:0,imagesUrl:[...a.imagesUrl.filter(b=>b!=="")]}};try{const b=await _[N](p,m);c(te(b.data)),n(),r()}catch(b){l(b.response.data.message)}},y=async h=>{try{const p=await _.delete(`${ce}/api/${oe}/admin/product/${h}`);console.log(p.data),o("商品已成功刪除"),n(),r()}catch(p){l(p.response.data.message)}},v=async h=>{const p=h.target.files?.[0];if(!p){l("請選擇要上傳的檔案");return}try{const N=new FormData;N.append("file-to-upload",p);const m=await _.post(`${ce}/api/${oe}/admin/upload`,N);i(b=>({...b,imageUrl:m.data.imageUrl})),o("圖片上傳成功")}catch(N){l(N)}};return t.jsx("div",{className:"modal fade",id:"productModal",tabIndex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true",children:t.jsx("div",{className:"modal-dialog modal-xl",children:t.jsxs("div",{className:"modal-content border-0",children:[t.jsxs("div",{className:`modal-header bg-${e==="delete"?"danger":"dark"} text-white`,children:[t.jsx("h5",{id:"productModalLabel",className:"modal-title",children:t.jsxs("span",{children:[e==="delete"?"刪除":e==="edit"?"編輯":"新增","產品"]})}),t.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),t.jsx("div",{className:"modal-body",children:e==="delete"?t.jsxs("p",{className:"fs-4",children:["確定要刪除",t.jsx("span",{className:"text-danger",children:a.title}),"嗎？"]}):t.jsxs("div",{className:"row",children:[t.jsxs("div",{className:"col-sm-4",children:[t.jsxs("div",{className:"mb-2",children:[t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{htmlFor:"fileUpload",className:"form-label",children:"上傳圖片"}),t.jsx("input",{className:"form-control",type:"file",name:"fileUpload",id:"fileUpload",accept:".jpg,.jpeg,.png",onChange:h=>v(h)})]}),t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{htmlFor:"imageUrl",className:"form-label",children:"輸入圖片網址"}),t.jsx("input",{type:"text",id:"imageUrl",name:"imageUrl",className:"form-control",placeholder:"請輸入圖片連結",value:a.imageUrl,onChange:h=>d(h)})]}),a.imageUrl&&t.jsx("img",{className:"img-fluid",src:a.imageUrl,alt:"主圖"})]}),t.jsxs("div",{children:[a.imagesUrl.map((h,p)=>t.jsxs("div",{children:[t.jsx("label",{htmlFor:"imageUrl",className:"form-label",children:"輸入圖片網址"}),t.jsx("input",{type:"text",className:"form-control",placeholder:`圖片網址${p+1}`,value:h,onChange:N=>u(p,N.target.value)}),h&&t.jsx("img",{className:"img-fluid",src:h,alt:`副圖${p+1}`})]},p)),a.imagesUrl.length<5&&a.imagesUrl[a.imagesUrl.length-1]!==""&&t.jsx("button",{className:"btn btn-outline-primary btn-sm d-block w-100",onClick:()=>f(),children:"新增圖片"})]}),t.jsx("div",{children:a.imagesUrl.length>=1&&t.jsx("button",{className:"btn btn-outline-danger btn-sm d-block w-100",onClick:()=>g(),children:"刪除圖片"})})]}),t.jsxs("div",{className:"col-sm-8",children:[t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{htmlFor:"title",className:"form-label",children:"產品名稱"}),t.jsx("input",{name:"title",id:"title",type:"text",className:"form-control",placeholder:"請輸入標題",value:a.title,onChange:h=>d(h)})]}),t.jsxs("div",{className:"row",children:[t.jsxs("div",{className:"mb-3 col-md-6",children:[t.jsx("label",{htmlFor:"category",className:"form-label",children:"分類"}),t.jsx("input",{name:"category",id:"category",type:"text",className:"form-control",placeholder:"請輸入分類",value:a.category,onChange:h=>d(h)})]}),t.jsxs("div",{className:"mb-3 col-md-6",children:[t.jsx("label",{htmlFor:"unit",className:"form-label",children:"單位"}),t.jsx("input",{name:"unit",id:"unit",type:"text",className:"form-control",placeholder:"請輸入單位",value:a.unit,onChange:h=>d(h)})]})]}),t.jsxs("div",{className:"row",children:[t.jsxs("div",{className:"mb-3 col-md-6",children:[t.jsx("label",{htmlFor:"origin_price",className:"form-label",children:"原價"}),t.jsx("input",{name:"origin_price",id:"origin_price",type:"number",min:"0",className:"form-control",placeholder:"請輸入原價",value:a.origin_price,onChange:h=>d(h)})]}),t.jsxs("div",{className:"mb-3 col-md-6",children:[t.jsx("label",{htmlFor:"price",className:"form-label",children:"售價"}),t.jsx("input",{name:"price",id:"price",type:"number",min:"0",className:"form-control",placeholder:"請輸入售價",value:a.price,onChange:h=>d(h)})]})]}),t.jsx("hr",{}),t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{htmlFor:"description",className:"form-label",children:"產品描述"}),t.jsx("textarea",{name:"description",id:"description",className:"form-control",placeholder:"請輸入產品描述",value:a.description,onChange:h=>d(h)})]}),t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{htmlFor:"content",className:"form-label",children:"說明內容"}),t.jsx("textarea",{name:"content",id:"content",className:"form-control",placeholder:"請輸入說明內容",value:a.content,onChange:h=>d(h)})]}),t.jsx("div",{className:"mb-3",children:t.jsxs("div",{className:"form-check",children:[t.jsx("input",{name:"is_enabled",id:"is_enabled",className:"form-check-input",type:"checkbox",checked:a.is_enabled,onChange:h=>d(h)}),t.jsx("label",{className:"form-check-label",htmlFor:"is_enabled",children:"是否啟用"})]})}),t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{className:"form-check-label",htmlFor:"style",children:"車型"}),t.jsxs("select",{id:"style",name:"style",className:"form-select","aria-label":"Default select example",value:a.style,onChange:h=>d(h),children:[t.jsx("option",{value:"",disabled:!0,children:"請選擇車型風格"}),t.jsx("option",{value:"仿賽",children:"仿賽"}),t.jsx("option",{value:"街車",children:"街車"}),t.jsx("option",{value:"速克達",children:"速克達"}),t.jsx("option",{value:"多功能",children:"多功能"}),t.jsx("option",{value:"美式",children:"美式"}),t.jsx("option",{value:"復古",children:"復古"})]})]})]})]})}),t.jsx("div",{className:"modal-footer",children:e==="delete"?t.jsx("button",{type:"button",className:"btn btn-danger",onClick:()=>y(a.id),children:"刪除"}):t.jsxs(t.Fragment,{children:[t.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>r(),children:"取消"}),t.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>j(a.id),children:"確認"})]})})]})})})}function Js({pagination:e,onChangePage:s}){const r=(n,a)=>{n.preventDefault(),s(a)};return t.jsx("nav",{"aria-label":"Page navigation example",children:t.jsxs("ul",{className:"pagination justify-content-center",children:[t.jsx("li",{className:`page-item ${!e.has_pre&&"disabled"}`,children:t.jsx("a",{className:"page-link",href:"#","aria-label":"Previous",onClick:n=>r(n,e.current_page-1),children:t.jsx("span",{"aria-hidden":"true",children:"«"})})}),Array.from({length:e.total_pages},(n,a)=>t.jsx("li",{className:`page-item ${e.current_page===a+1&&"active"}`,children:t.jsx("a",{className:"page-link",href:"#",onClick:i=>r(i,a+1),children:a+1})},`${a}_page`)),t.jsx("li",{className:`page-item ${!e.has_next&&"disabled"}`,children:t.jsx("a",{className:"page-link",href:"#","aria-label":"Next",onClick:n=>r(n,e.current_page+1),children:t.jsx("span",{"aria-hidden":"true",children:"»"})})})]})})}const Zs="https://vue3-course-api.hexschool.io/v2",er="rudy2026",Ae={id:"",title:"",category:"",origin_price:"",price:"",unit:"",description:"",content:"",is_enabled:!1,imageUrl:"",imagesUrl:[],style:""};function tr(){const[e,s]=S.useState([]),[r,n]=S.useState(Ae),[a,i]=S.useState(),[c,l]=S.useState({}),o=S.useRef(null),d=K(),{showSuccess:u}=X(),f=async(y=1)=>{try{const v=await _.get(`${Zs}/api/${er}/admin/products?page=${y}`);s(Object.values(v.data.products)),l(v.data.pagination),u("取得成功")}catch(v){d(te(v.response.data.message))}};S.useEffect(()=>{o.current=new dt("#productModal",{keyboard:!1}),f()},[]);const g=(y,v)=>{i(y),n({...Ae,...v}),o.current.show()},j=()=>{o.current.hide()};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"container",children:[t.jsx("h2",{children:"產品列表"}),t.jsx("div",{className:"text-end mt-4",children:t.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>g("create",Ae),children:"建立新的產品"})}),t.jsxs("table",{className:"table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"品牌"}),t.jsx("th",{children:"車型風格"}),t.jsx("th",{children:"產品名稱"}),t.jsx("th",{children:"原價"}),t.jsx("th",{children:"售價"}),t.jsx("th",{children:"是否啟用"}),t.jsx("th",{children:"編輯"})]})}),t.jsx("tbody",{children:e&&e.length>0?e.map(y=>t.jsxs("tr",{children:[t.jsx("td",{children:y.category}),t.jsx("td",{children:y.style}),t.jsx("th",{scope:"row",children:y.title}),t.jsx("td",{children:y.origin_price}),t.jsx("td",{children:y.price}),t.jsx("td",{className:`${y.is_enabled&&"text-success"}`,children:y.is_enabled?"啟用":"未啟用"}),t.jsx("td",{children:t.jsxs("div",{className:"btn-group",role:"group","aria-label":"Basic product",children:[t.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>g("edit",y),children:"編輯"}),t.jsx("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:()=>g("delete",y),children:"刪除"})]})})]},y.id)):t.jsx("tr",{children:t.jsx("td",{colSpan:"7",className:"text-center",children:"尚無產品資料"})})})]}),t.jsx(Js,{pagination:c,onChangePage:f})]}),t.jsx(Ys,{modalType:a,templateProduct:r,closeModal:j,getProducts:f})]})}const sr=()=>t.jsxs(t.Fragment,{children:[t.jsx("header",{children:t.jsx("div",{className:"d-flex justify-content-between",children:t.jsxs("ul",{className:"nav",children:[t.jsx("li",{className:"nav-item btn",children:t.jsx(I,{className:"nav-link",to:"/admin/products",children:"後台產品列表"})}),t.jsx("li",{className:"nav-item btn",children:t.jsx(I,{className:"nav-link",to:"/admin/orders",children:"後台訂單列表"})})]})})}),t.jsx("main",{children:t.jsx(ct,{})}),t.jsx("footer",{children:t.jsx("p",{className:"mt-5 mb-3 text-muted",children:"© 2026~∞ Rudy-六角學院- React 直播班"})})]}),rr=()=>t.jsx(t.Fragment,{children:t.jsx("h2",{children:"訂單頁面"})}),nr="https://vue3-course-api.hexschool.io/v2",ar=({children:e})=>{const[s,r]=S.useState(!1),[n,a]=S.useState(!0);return S.useEffect(()=>{const i=document.cookie.split("; ").find(l=>l.startsWith("hexToken="))?.split("=")[1];i&&(_.defaults.headers.common.Authorization=i),(async()=>{try{const l=await _.post(`${nr}/api/user/check`);console.log("token 驗證結果:",l.data),r(!0)}catch(l){console.error("token 驗證失敗",l.response)}finally{a(!1)}})()},[]),n?t.jsx(Et,{}):s?e:t.jsx(At,{to:"/login"})},ir=$t([{path:"/",element:t.jsx(Dt,{}),children:[{index:!0,element:t.jsx(Ut,{})},{path:"products/",element:t.jsx(Bt,{})},{path:"product/:id",element:t.jsx(Vs,{})},{path:"cart",element:t.jsx(Ws,{})},{path:"checkout",element:t.jsx(Ks,{})},{path:"login",element:t.jsx(Qs,{})}]},{path:"/admin",element:t.jsx(ar,{children:t.jsx(sr,{})}),children:[{path:"products",element:t.jsx(tr,{})},{path:"orders",element:t.jsx(rr,{})}]},{path:"*",element:t.jsx(Hs,{})}]),cr=()=>{const e=Mt(s=>s.message);return t.jsx("div",{className:"toast-container position-fixed top-0 end-0 p-3",children:e.map(s=>t.jsxs("div",{className:"toast show",role:"alert","aria-live":"assertive","aria-atomic":"true",children:[t.jsxs("div",{className:`toast-header text-white bg-${s.type}`,children:[t.jsx("strong",{className:"me-auto",children:s.title}),t.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"toast","aria-label":"Close"})]}),t.jsx("div",{className:"toast-body",children:s.text})]},s.id))})},or=()=>t.jsxs(t.Fragment,{children:[t.jsx(cr,{}),t.jsx(Rt,{router:ir})]}),lr=bs({reducer:{message:qs}});Ot.createRoot(document.getElementById("root")).render(t.jsx(S.StrictMode,{children:t.jsx(Tt,{store:lr,children:t.jsx(or,{})})}));
